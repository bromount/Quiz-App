{% extends "dashBase.html" %}

{% block title %}VEC Quiz App{% endblock %}
{% block customCSS %}
<link rel="stylesheet" href="../static/studDashboard.css">
{% endblock %}
{% block dashContent %}


    <div class="sidebar">
        <div class="studBanner">
            <img src="../static/VEC-logo.png" alt="logo" class="clgLogo">
            <h6 class="studName">{{studName}}</h6>
        </div>
        <input type="text" name="testCode" id="testCode" placeholder="TEST CODE" onkeydown="writeTest(this)">
        <a href="" class="active">Dash Board</a>
        <a href="">Previous Test Results</a>
        <a href="">Take up a new test !</a>
     </div>

    <div class="content">
        <h1>Hello, {{studName}}</h1><br>
        <p>Welcome to VEC Communicative English Quiz App</p>
        <div class="prevResults">
            <h5>Your Previous Performance</h5>
            <h6>Test : XyAsD12345</h6>
            <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Maiores laboriosam accusamus, in magnam dolores aspernatur ea quaerat distinctio obcaecati hic rem, iste cupiditate corrupti ratione. Ullam porro dolores praesentium aperiam.
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Accusantium, blanditiis deleniti autem sed maiores soluta laboriosam. Quasi voluptas, dolorem id similique perspiciatis, ipsum temporibus eos tempore autem, asperiores incidunt provident?
            Lorem, ipsum dolor sit amet consectetur adipisicing elit. Veritatis distinctio rerum nisi, laboriosam rem possimus assumenda. Fugiat sint nulla, repellendus quisquam asperiores pariatur ducimus nemo delectus ipsa. Inventore, assumenda vero.
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Nulla impedit quasi ducimus quia doloremque! Laboriosam debitis esse deleniti vel minus id sed earum, deserunt, a, fugiat labore cum beatae nostrum.
            </p>
        </div>
    </div>

      <div class="modal" tabindex="-1" style="display: none;">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Instructions for writing the test!</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <ol>
                    <li>Finish the test at the specified time.</li>
                    <li>Audio will play automatically.</li>
                    <li>You can't write the test after the time is over.</li>
                    <li>Make sure to click the submit button to submit the test.</li>
                    <li>After completing the test, the report will be generated.</li>
                </ol>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal" id="confirmButton">Okay</button>
            </div>
          </div>
        </div>
      </div>

{% endblock %}

{% block customJS %}
<script>
    var writeTest = (input)=>{
        if(event.key == 'Enter'){
            var testCode = input.value;
            document.querySelector('.modal').style.display = "block";
            var confirmButton = document.querySelector("#confirmButton");
            confirmButton.addEventListener('click',function(){
            $.ajax({
                url : `/verify_test/${testCode}`,
                type:'POST',
                data: {'testCode':testCode},
                success: function(response) { 
                    window.location.href = response.url;
                }
            })
            });
        };
    }
</script>

{% endblock %}
